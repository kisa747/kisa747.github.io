## IPv6 知识

IPv6 是英文“Internet Protocol Version 6”（互联网协议第 6 版）的缩写，是互联网工程任务组（IETF）设计的用于替代 IPv4 的下一代 IP 协议。

## IPv6 地址形式

如果没有接入 IPV6 网络，使用 `ipconfig` 命令得到的 IP 地址如下：

```ini
以太网适配器 以太网:

   连接特定的 DNS 后缀 . . . . . . . :
   本地链接 IPv6 地址. . . . . . . . : fe80::4cc7:2fc3:99d5:d78a%13
   IPv4 地址 . . . . . . . . . . . . : 192.168.88.172
   子网掩码  . . . . . . . . . . . . : 255.255.255.0
   默认网关. . . . . . . . . . . . . : 192.168.88.1
```

IPv6 地址以 `fe80` 开头的，表明是一个内网地址，类似于 IPv4 的 `192.168.1.100` ，外网是无法直接访问的。

当接入 IPV6 网络时，使用 `ipconfig` 命令得到的 IP 地址如下：

```ini
无线局域网适配器 WLAN:

   连接特定的 DNS 后缀 . . . . . . . :
   IPv6 地址 . . . . . . . . . . . . : 2408:****:****:****:****:****:****:****
   临时 IPv6 地址. . . . . . . . . . : 2408:****:****:****:****:****:****:****
   本地链接 IPv6 地址. . . . . . . . : fe80::1131:4824:1762:245e%19
   IPv4 地址 . . . . . . . . . . . . : 172.20.10.8
   子网掩码  . . . . . . . . . . . . : 255.255.255.240
   默认网关. . . . . . . . . . . . . : fe80::14ca:afee:f26d:5dbc%19
                                       172.20.10.1
```

## 为什么 ipv6 有临时 ipv6 地址呢？

临时地址的地址是随机生成，主要作用是对外通讯使用，缺点就是没有暴露本机 mac 地址。

因为 linux 和 mac 系统在默认下是使用 EUI-64 来生成 ipv6 地址，而 windows 是默认随机生成（都可以改）

这么说吧，临时地址是为了保证你安全的，由于地址生成规则的统一性，也没有 NAT 规则转换，地址赤裸裸的暴露在外面不安全。

两个都有时通信时用的是临时 ipv6 地址。

Windows XP、Vista 和 Windows 7 系统会自动得到一个临时的 IPv6 地址。可通过以下命令禁止自动获取：netsh interface ipv6 setprivacy state=disable.重启网卡后再查看就没有那个临时的地址了，这时通信时用的是 ipv6 地址。

这个是 windows 由于 ipv6 地址不够匿名，而搞出来的地址随机化（后缀不同）……

windows 上两个临时 ipv6 地址会发生冲突，如我贴上所示，显示“受到抨击”，英文更准确是“Deprecated”，会导致无法上网。

现在各大运营商用的 ipv6

>电信是 240e 开头的（240e::/20）
>
>移动是 2409 开头的（2409:8000::/20）
>
>联通是 2408 开头的（2408:8000::/20）

其他一些标记有 teredo 也不是原生 ipv6
