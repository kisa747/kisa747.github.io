# 正则表达式 - 学习

## 笔记

参考：<https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md>

`(?:pattern)`表示非捕获组，

## 零宽断言

零宽断言，仅判断条件，本身并不输出匹配，也即零宽。

>`=` 肯定型，匹配对应的字符串；`!` 否定型，不匹配对应的字符串。
>
>默认向左看，与前面的表达式组合在一起；`<` 向右看，与后面的表达式组合在一起。
>
>可以这样记忆：
>
>`=` 肯定型，匹配对应的字符串；`!` 否定型，不匹配对应的字符串。默认向左看，与前面的表达式组合在一起。
>
>不用记后视型，当无法满足需求时，再考虑后视型。

正则表达式的先行断言和后行断言一共有 4 种形式：

- `(?=pattern)` 零宽肯定型前视断言 (zero-width positive lookahead assertion)
- `(?!pattern)` 零宽否定型前视断言 (zero-width negative lookahead assertion)
- `(?<=pattern)` 零宽肯定型后视断言 (zero-width positive lookbehind assertion)
- `(?<!pattern)` 零宽否定型后视断言 (zero-width negative lookbehind assertion)

零宽断言 (Zero-Length Assertions)

```python
import re
s = '小明买了 2 只鸡，花了￥30 元；买了 2 只鸭，花了￥40 元，买了 3 只鹅，花了$50 元。'
```

### 肯定型前视断言

```python
# 小明花了多少人民币和美元？
re.findall(r'\d+(?=元)', s)
out[]:
['30', '40', '50']
```

### 否定型前视断言

小明除了鸡，其余买了多少只？

```python
re.findall(r'(\d+)只(?!鸡)', s)
out[]:
['2', '3']
```

### 肯定型后视断言

小明花了多少美元？

```python
re.findall(r'(?<=\$)\d+', s)
out[]:
['50']
```

### 否定型后视断言

小明除了美元，还花了多少钱？

```python
re.findall(r'(?<![\$\d])\d+(?=元)', s)
out[]:
['30', '40']
```
